ğŸ“˜ Concept Notes: Product of Three Numbers (Codeforces)
Goal:

Given an integer n (2 â‰¤ n â‰¤ 10^9), find three distinct integers
a, b, c â‰¥ 2 such that:

a * b * c = n


If impossible â†’ print "NO".

You must solve up to 100 test cases.

ğŸ¯ Key Insight

To represent n = a Â· b Â· c, you just need:

Find the first small factor a.

Divide: n = n / a.

Find a second factor b, different from a.

The remaining number c = n / b must be:

â‰¥ 2

distinct from a and b

If all 3 are distinct â†’ YES
Else â†’ NO

ğŸ”¥ Why this works?

Because any composite number â‰¤ 10^9 will have at least one factor â‰¤ âˆšn.
So checking only up to âˆšn is enough.

This gives a very fast solution: O(âˆšn) per test case.

âœ… Steps to Solve (Important Logic)
Step 1 â€” Find a (first factor)

Loop i = 2 â†’ âˆšn
If n % i == 0:
â†’ a = i
â†’ n = n / i
â†’ break

If no factor found â†’ n is prime â†’ NO

Step 2 â€” Find b (second factor)

Start from i = a + 1 â†’ âˆšn
If n % i == 0:
â†’ b = i
â†’ n = n / i
â†’ break

If no second factor â†’ NO

Step 3 â€” remaining number is c
c = n


Now check:

c > 1

c != a

c != b

If yes â†’ YES, print a b c
Else â†’ NO

ğŸ“Œ Example Walkthrough
Example: n = 64

First factor a = 2

n = 64 / 2 = 32

Second factor b = 4

n = 32 / 4 = 8

Third factor c = 8

All distinct and â‰¥ 2
âœ” Answer: 2 4 8

Example: n = 32

a = 2

n = 16

b = 4

n = 4

c = 4
But c == b â†’ NOT distinct â†’ âŒ
Answer: NO

Example: n = 97

97 is prime â†’ no factor
Answer: NO

Example: n = 12345

a = 3

n = 4115

b = 5

n = 823

c = 823 (distinct)

âœ” Answer: 3 5 823

ğŸ’¡ Important Observations

You donâ€™t need sieve.

You donâ€™t need prime list.

Factorization up to âˆšn is enough (â‰ˆ 31622).

Only need two loops; third factor is automatic.

Distinctness is the only tricky part.

ğŸš€ Final Complexity
Time:  O(âˆšn)
Space: O(1)
code ::
#include <bits/stdc++.h>
using namespace std;

/*
------------------------------------------------------------
                PRODUCT OF THREE NUMBERS
------------------------------------------------------------
Goal:
Given n, find 3 DISTINCT integers a, b, c >= 2 such that:
        a * b * c = n
If impossible â†’ print NO

Idea:
1) Find first small factor 'a'      â†’ loop till sqrt(n)
2) Divide n = n / a
3) Find second factor 'b' != a      â†’ loop till sqrt(n)
4) Remaining value = c
5) Check all three are distinct and >= 2

Time complexity: O(sqrt(n)) per test case
------------------------------------------------------------
*/

void solve() {
    long long n;
    cin >> n;

    vector<long long> v;   // will store a, b, c

    // ------------------ Step 1: Find first factor 'a' ------------------
    long long a = -1;
    for (long long i = 2; i * i <= n; i++) {
        if (n % i == 0) {
            a = i;
            n /= i;        // reduce n
            v.push_back(a);
            break;
        }
    }

    // if no factor found â†’ n was prime â†’ cannot split into 3
    if (v.empty()) {
        cout << "NO\n";
        return;
    }

    // ------------------ Step 2: Find second factor 'b' ------------------
    long long b = -1;
    for (long long i = a + 1; i * i <= n; i++) {   // start from a+1 â†’ ensure distinct
        if (n % i == 0) {
            b = i;
            n /= i;        // reduce n again
            v.push_back(b);
            break;
        }
    }

    // if no 2nd factor â†’ can't form 3 distinct numbers
    if (v.size() < 2) {
        cout << "NO\n";
        return;
    }

    // ------------------ Step 3: Third factor 'c' ------------------
    long long c = n;

    // Conditions:
    // c must be >= 2
    // c must be distinct from a and b
    if (c <= 1 || c == v[0] || c == v[1]) {
        cout << "NO\n";
        return;
    }

    // Everything valid â†’ YES
    v.push_back(c);

    cout << "YES\n";
    cout << v[0] << " " << v[1] << " " << v[2] << "\n";
}

int main() {
    ios::sync_with_stdio(false);
    cin.tie(nullptr);

    int t;
    cin >> t;
    while (t--) solve();

    return 0;
}


Passes easily within 2 seconds.
