ğŸ’¤ Codeforces B â€” Average Sleep Time
link: https://codeforces.com/problemset/problem/808/B
ğŸ§  Problem Summary

Polycarp recorded his sleep time for n days.
In Berland, a week has k days.

He considers every consecutive group of k days as a â€œweekâ€.
We must find the average total sleep time per week,
averaged over all such possible weeks.

ğŸ“¥ Input

Two integers n and k â†’ number of days & week length
1 â‰¤ k â‰¤ n â‰¤ 2Ã—10âµ

Sequence aâ‚, aâ‚‚, â€¦, aâ‚™
1 â‰¤ aáµ¢ â‰¤ 10âµ

ğŸ“¤ Output

Print a single floating-point number â€”
average total sleep time across all (n - k + 1) weeks.

Precision:
Absolute or relative error â‰¤ 10â»â¶
â†’ use at least 6â€“10 digits after decimal.

ğŸ“Š Example

Input

3 2
3 4 7


Output

9.0000000000


Explanation
Possible â€œweeksâ€ (subarrays of length 2):

Week	Days	Sum
1	[3, 4]	7
2	[4, 7]	11

Average = (7 + 11) / 2 = 9.0

ğŸ§© Logic & Formula

Let prefix sums be:

ğ‘ğ‘“[ğ‘–]=ğ‘1+ğ‘2+â‹¯+ğ‘ğ‘–pf[i]=a1	+a2	â€‹+â‹¯+ai

Then the sum of subarray [i-k+1, i] =

pf[i]âˆ’pf[iâˆ’k]

(handling negative indices carefully)

Total sum over all possible weeks:

total=âˆ‘ğ‘–=ğ‘˜ğ‘›(ğ‘ğ‘“[ğ‘–]âˆ’ğ‘ğ‘“[ğ‘–âˆ’ğ‘˜])total=i=kâˆ‘n
	â€‹

(pf[i]âˆ’pf[iâˆ’k])

Final answer:

avg=totalğ‘›âˆ’ğ‘˜+1avg=nâˆ’k+1total
	â€‹

ğŸ§® Code
#include <bits/stdc++.h>
using namespace std;
#define ll long long

void solve() {
    ll n, k;
    cin >> n >> k;
    vector<ll> v(n);
    for (auto &it : v) cin >> it;

    vector<ll> pf(n);
    pf[0] = v[0];
    for (int i = 1; i < n; i++)
        pf[i] = v[i] + pf[i - 1];

    long double sum = 0;
    for (int i = k - 1; i < n; i++)
        sum += pf[i] - (i - k >= 0 ? pf[i - k] : 0);

    sum = sum / (n - k + 1);
    cout << fixed << setprecision(10) << sum << endl;
}

int main() {
    ios::sync_with_stdio(false);
    cin.tie(nullptr);
    solve();
}

âš™ï¸ Time Complexity
Step	Operation	Complexity
Prefix sum creation	O(n)	
Sliding window / summation	O(n)	
Total	O(n) per test case	

Since âˆ‘n â‰¤ 2Ã—10âµ, this is perfectly efficient.

ğŸ’¾ Space Complexity
Component	Space
Input array v	O(n)
Prefix array pf	O(n)
Constants	O(1)
Total	O(n)
ğŸ§  Key Takeaways

âœ… Prefix sums make subarray sum queries O(1).
âœ… long double avoids precision errors for large totals.
âœ… Always use fixed << setprecision(10) for floating outputs.
âœ… Handles up to 2Ã—10âµ efficiently in 1s limit.
