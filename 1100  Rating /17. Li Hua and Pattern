ğŸ“˜ Li Hua and Pattern â€“ Notes
ğŸ§© Problem Statement
link: https://codeforces.com/problemset/problem/1797/B
You are given an n Ã— n matrix (pattern) with cells colored red (1) or blue (0).
You can perform exactly k operations, and in each operation:

Choose any cell, and flip its color (0 â†’ 1 or 1 â†’ 0).

Your goal:
After performing exactly k operations, the pattern should look the same as its 180Â° rotation.

ğŸ” 180Â° Rotation Condition

After 180Â° rotation,
for every cell (i, j), it must hold that:


v[i][j]=v[nâˆ’1âˆ’i][nâˆ’1âˆ’j]

This means the cell and its opposite cell must have the same value.

âš™ï¸ Approach
Step 1: Count mismatched pairs

For each pair of symmetric cells (i, j) and (n-1-i, n-1-j):

If v[i][j] != v[n-1-i][n-1-j],
â†’ they form a mismatch pair â†’ needs 1 flip to fix.

Let cnt = total mismatched pairs.

(Each mismatch counted twice â†’ divide by 2 at the end.)

Step 2: Decide possibility

Minimum operations required to make it symmetric = cnt.

You can use extra moves (k - cnt) only if:

They donâ€™t destroy symmetry, and

You use exactly k operations.

âœ… Condition for "YES"
Case	Condition	Explanation
1ï¸âƒ£	cnt > k	âŒ Not enough operations
2ï¸âƒ£	(k - cnt) even	âœ… You can flip symmetric pairs twice
3ï¸âƒ£	n odd	âœ… Center cell allows one extra flip
ğŸ“˜ Final Decision Rule

IfÂ cnt>kâ‡’NO

ElseÂ ifÂ (kâˆ’cnt)%2==0Â orÂ n%2==1â‡’YES
ElseÂ 
â‡’
NO
ElseÂ â‡’NO
ğŸ’» Code Implementation
#include <bits/stdc++.h>
using namespace std;

int main() {
    ios::sync_with_stdio(false);
    cin.tie(0);

    int t;
    cin >> t;
    while (t--) {
        int n, k;
        cin >> n >> k;
        vector<vector<int>> v(n, vector<int>(n));
        for (int i = 0; i < n; i++)
            for (int j = 0; j < n; j++)
                cin >> v[i][j];

        int cnt = 0;
        for (int i = 0; i < n; i++) {
            for (int j = 0; j < n; j++) {
                int ni = n - 1 - i, nj = n - 1 - j;
                if (v[i][j] != v[ni][nj]) cnt++;
            }
        }

        cnt /= 2; // each mismatch counted twice

        if (cnt > k) cout << "NO\n";
        else if ((k - cnt) % 2 == 0 || n % 2 == 1) cout << "YES\n";
        else cout << "NO\n";
    }
}

ğŸ§  Example

Input:

3
4 0
1 1 1 1
0 0 0 1
1 0 1 0
1 1 1 1
4 3
1 0 1 1
1 0 0 0
0 1 0 1
1 1 0 1
5 4
0 0 0 0 0
0 1 1 1 1
0 1 0 0 0
1 1 1 1 1
0 0 0 0 0


Output:

NO
YES
YES

ğŸ§¾ Key Notes Summary
Term	Meaning
cnt	Number of mismatched symmetric pairs
k	Total allowed operations
n	Matrix size
Rotation Symmetry	v[i][j] = v[n-1-i][n-1-j]
Even (k - cnt)	Symmetry preserved
Odd n	Center cell allows extra flip
Time Complexity	O(nÂ²)

âœ… In short:

Make it symmetric first (needs cnt ops).
Use leftover moves smartly â€” even leftovers always fine, odd leftover fine only for odd n.
