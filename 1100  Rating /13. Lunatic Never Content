ğŸ§  Problem: Lunatic Never Content (CF #1917B)
ğŸ§© Problem Summary
link: https://codeforces.com/problemset/problem/1826/B
You are given an array a of size n.
For some positive integer x, define:

ğ‘“(ğ‘,ğ‘¥)=[ğ‘1â€Šmodâ€Šğ‘¥,ğ‘2â€Šmodâ€Šğ‘¥,â€¦,ğ‘ğ‘›â€Šmodâ€Šğ‘¥]f(a,x)=[a1	â€‹modx,a2	â€‹modx,â€¦,an	â€‹modx]

Find the largest x such that f(a, x) is a palindrome.

If infinitely many x work â†’ print 0.

ğŸ’¡ Understanding Whatâ€™s Asked

We need:

ğ‘ğ‘–â€Šmodâ€Šğ‘¥=ğ‘ğ‘›âˆ’ğ‘–+1â€Šmodâ€Šğ‘¥âˆ€ğ‘–ai
	
modx=a
nâˆ’i+1
	â€‹

modxâˆ€i

A palindrome means â†’
each element equals its mirror element.

ğŸ§® Core Mathematical Observation

For two numbers a and b:
ğ‘â€Šmodâ€Šğ‘¥=ğ‘â€Šmodâ€Šğ‘¥
âŸºâ€…â€Šğ‘¥âˆ£(ğ‘âˆ’ğ‘)amodx=bmodxâŸºxâˆ£(aâˆ’b)

(x divides their difference)

Hence, for the array to be palindrome:
ğ‘¥Â dividesÂ âˆ£ğ‘ğ‘–âˆ’ğ‘ğ‘›âˆ’ğ‘–+1âˆ£xÂ dividesÂ âˆ£ai	â€‹âˆ’anâˆ’i+1	
âˆ£

So, x must divide all pairwise differences between mirrored elements.

âš™ï¸ Key Derivation
Let:ğ‘‘ğ‘–ğ‘“ğ‘“ğ‘–=âˆ£ğ‘ğ‘–âˆ’ğ‘ğ‘›âˆ’ğ‘–+1âˆ£diffi	â€‹=âˆ£ai	â€‹âˆ’anâˆ’i+1	â€‹
âˆ£
Then the largest x that divides all diff_i values is:

ğ‘¥=gcdâ¡(ğ‘‘ğ‘–ğ‘“ğ‘“1,ğ‘‘ğ‘–ğ‘“ğ‘“2,â€¦)x=gcd(diff1	â€‹,diff2	â€‹,â€¦)

âœ… If all differences are 0 â†’ the array is already palindrome
â†’ any x works â†’ answer = 0

ğŸ”¢ Example Walkthrough
Example 1:
a = [1, 2]


â†’ |1âˆ’2| = 1
â†’ gcd = 1
âœ… answer = 1

Example 2:
a = [3, 0, 1, 2, 0, 3, 2, 1]


Differences:
|3âˆ’1|=2, |0âˆ’2|=2, |1âˆ’3|=2, |2âˆ’0|=2
â†’ gcd = 2
âœ… answer = 2

Example 3:
a = [0]


No difference â†’ palindrome â†’ infinite x â†’ âœ… answer = 0

Example 4:
a = [100, 1, 1000000000]


|100âˆ’1000000000| = 999999900
âœ… answer = 999999900

ğŸ§¾ Algorithm

For each test case:

Read n and array a.

Initialize g = 0.

For all i from 0 to nâˆ’1:

g = gcd(g, abs(a[i] - a[n-1-i]));


If g == 0 â†’ print 0
else â†’ print g.

ğŸ§‘â€ğŸ’» Final C++ Code
#include <bits/stdc++.h>
using namespace std;

int main() {
    ios::sync_with_stdio(false);
    cin.tie(nullptr);

    int t;
    cin >> t;
    while (t--) {
        int n;
        cin >> n;
        vector<long long> a(n);
        for (auto &x : a) cin >> x;

        long long g = 0;
        for (int i = 0; i < n; i++) {
            g = gcd(g, abs(a[i] - a[n - i - 1]));
        }

        cout << (g == 0 ? 0 : g) << "\n";
    }
    return 0;
}

â±ï¸ Complexity

Time: O(n) per test case

Memory: O(n)

Total n across tests â‰¤ 1e5 â†’ efficient âœ…

ğŸ§  Key Takeaways / Intuition
Concept	Meaning
% equality	Implies divisibility of difference
Palindrome condition	a[i] % x == a[n-i+1] % x
Translate to math	`x
Combine all	x divides all diffs â†’ use gcd
Already palindrome	All diffs = 0 â†’ infinite â†’ print 0
âš¡ Extra Tip: GCD Refresher

Euclidean Algorithm (manual):

gcd(a, b):
  while (b != 0):
    temp = b
    b = a % b
    a = temp
  return a


Properties:

gcd(0, a) = |a|

gcd(a, b) = gcd(b, a % b)

ğŸ§© Final Summary
Step	Action	Result
1	Compare symmetric elements	Find
2	Compute gcd of all	Gives largest valid x
3	If gcd == 0	Print 0
4	Else	Print gcd

â†’ Concept: â€œModulo equality â‡’ divisibility â‡’ GCD of differencesâ€
â†’ Skill built: Modulo + GCD + Palindrome logic (a very common CF pattern)
