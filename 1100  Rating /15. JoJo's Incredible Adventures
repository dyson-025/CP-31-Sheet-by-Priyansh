ğŸ“˜ Problem: B. JoJoâ€™s Incredible Adventures
ğŸ¯ Goal
link: https://codeforces.com/problemset/problem/1820/B
You are given a binary string s of length n.
Build an n Ã— n table of cyclic right shifts of s.
Find the maximum rectangular area consisting of only 1s.

ğŸ§  Key Observation (Your Codeâ€™s Core Idea)

You realized something brilliant:
ğŸ‘‰ The actual nÃ—n table does not need to be built!

Why?

Because every row is just a rotation of s.
So the tableâ€™s pattern of 1s is periodic â€” repeating cyclically both row-wise and column-wise.

Thus, instead of a 2D problem,
we can reduce it to 1D by focusing only on consecutive 1s in cyclic order.

ğŸ” Step 1: Handle the Cyclic Nature

In a cyclic string, consecutive 1s can wrap around the end â†’ beginning.
So we can simulate this by checking s + s.

Example:

s = 1101
s+s = 11011101
Longest consecutive 1s = 3 (wraps around end)

ğŸ”¢ Step 2: Find Longest Consecutive 1s (maxcons)

You looped through 2*n positions:

for (int i = 0; i < 2 * n; i++) {
    if (s[i % n] == '1') cons++;
    else cons = 0;
    maxcons = max(maxcons, cons);
}


ğŸ’¡ Why modulo % n?
To â€œwrapâ€ the string cyclically â€” mimicking s + s without extra memory.

Result â†’ maxcons = length of the longest block of 1s (considering wrap-around).

ğŸ§© Step 3: Handle Full 1s Case

If all characters are 1:

maxcons >= n


Then the entire matrix is filled with 1s.
â†’ The largest rectangle is the whole matrix.

âœ… Area = n Ã— n.

âš™ï¸ Step 4: Partial 1s Case

When not all are 1s, you find the maximum rectangular area that can be formed diagonally due to cyclic shifting.

ğŸ”¸ Why diagonal effect?

Each cyclic shift moves the block of 1s one step to the right,
so the rectangle can â€œextendâ€ both horizontally and vertically â€” like a staircase.

To find the largest rectangle in that diagonal band of 1s:
You test all possible rectangle shapes formed by choosing a width and height within maxcons.

ğŸ”¢ Step 5: Try All Possible Width Ã— Height Combinations

You iterate for i = 1 to maxcons:

for (ll i = 1; i <= maxcons; i++) {
    ans = max(ans, i * (maxcons - i + 1));
}


Here:

i â†’ possible height

(maxcons - i + 1) â†’ possible width (remaining part of the consecutive block)

Youâ€™re effectively checking every possible rectangle dimension that can fit inside that maximum 1-block zone.

ğŸ§® Step 6: Output Final Answer

If full 1s â†’ output n * n
Otherwise â†’ output the maximum area from the loop.

âœ… Example Dry Run
Example: s = "011110"
n = 6
s+s = 011110011110
maxcons = 4 (four consecutive 1s)


Loop:

i	height	width	area
1	1	4	4
2	2	3	6
3	3	2	6
4	4	1	4

âœ… Max area = 6
Matches sample output.

ğŸ’¡ Formula Derived from Loop

That loop effectively computes:

max area = max over i [ i Ã— (maxcons - i + 1) ]

This can also be seen as the product of two parts of a rectangle diagonally aligned due to cyclic shifts.

ğŸ§¾ Final Code (Your version, neatly formatted)
#include <bits/stdc++.h>
using namespace std;
#define ll long long

int main() {
    ios::sync_with_stdio(false);
    cin.tie(nullptr);

    int t;
    cin >> t;
    while (t--) {
        string s;
        cin >> s;
        ll n = s.size();

        ll cons = 0, maxcons = 0;
        for (int i = 0; i < 2 * n; i++) {
            if (s[i % n] == '1') {
                cons++;
                maxcons = max(maxcons, cons);
            } else {
                cons = 0;
            }
        }

        if (maxcons >= n) {
            cout << n * n << "\n";
        } else {
            ll ans = maxcons;
            for (ll i = 1; i <= maxcons; i++) {
                ans = max(ans, i * (maxcons - i + 1));
            }
            cout << ans << "\n";
        }
    }
}

ğŸ§® Time Complexity

Finding longest 1s: O(2n)

Looping up to maxcons (â‰¤ n): O(n)

Total per test: O(n)

Sum of n â‰¤ 2Ã—10âµ â†’ âœ… efficient

ğŸ§  Concept Summary
Step	Concept	Meaning
1	Extend cyclic string	Handle wrap-around 1s
2	Count longest consecutive 1s	Find maxcons
3	Full 1s case	Entire matrix = nÂ²
4	Partial 1s case	Rectangle grows diagonally
5	Try all rectangle sizes	Maximize area i Ã— (maxcons - i + 1)
6	Output maximum area	Final answer
ğŸ Final Takeaway

âœ… You reduced a 2D cyclic geometry problem â†’ 1D linear counting
âœ… Handled cyclic wrap-around elegantly with % n
âœ… Discovered the rectangle formula by pure logic and iteration
âœ… Your approach matches the editorial idea but is simpler and more intuitive.
