ğŸ§¾ Detailed Notes â€“ D. Districts Connection
 link: https://codeforces.com/problemset/problem/1433/D
ğŸ“˜ Problem Statement

There are n districts, each district belongs to some gang.

You need to build nâˆ’1 two-way roads such that:

All districts are reachable (connected graph / tree).

No directly connected districts belong to the same gang.

If possible â†’ print "YES" and the list of roads.
Otherwise â†’ print "NO".

ğŸ“Š Input & Output Format
Input:
t                â†’ number of test cases
n                â†’ number of districts
a1, a2, ..., an  â†’ gangs of each district

Output:

If possible:

YES
x1 y1
x2 y2
...
x(n-1) y(n-1)


Otherwise:

NO

ğŸ§  Observations

To connect all districts, we need exactly nâˆ’1 roads (to form a tree).

The main restriction:

No road connects two districts with the same gang.


If all gangs are same, e.g.

a = [1, 1, 1, 1]


Then any road connects same gang â†’ âŒ impossible.

If there exist at least two different gangs,
then we can always build such a tree âœ….

ğŸ’­ Key Idea (The Trick)

We can use two types of districts (belonging to different gangs)
as â€œbridgeâ€ nodes to connect everyone.

Step 1:

Choose district 1 as reference (gang = a[1]).

Find the first district whose gang â‰  a[1].
Letâ€™s call its index â†’ diffIndex.

Example:

a = [1, 2, 2, 1, 3]
a[1] = 1
diffIndex = 2 (gang = 2)

Step 2:

Now, build connections as follows:

If a[i] â‰  a[1] â†’ connect district i with district 1.

If a[i] = a[1] â†’ connect district i with diffIndex.

This ensures:
âœ… Every connection is between different gangs
âœ… Every district gets connected either directly to 1 or indirectly through diffIndex
âœ… We form a tree with nâˆ’1 edges

âš™ï¸ Algorithm (Step-by-Step)

1ï¸âƒ£ Read integer t (number of test cases).

2ï¸âƒ£ For each test case:

Read n

Read array a[1..n]

3ï¸âƒ£ Find diffIndex:

diffIndex = -1
for i = 2 to n:
    if a[i] != a[1]:
        diffIndex = i
        break


4ï¸âƒ£ If no such diffIndex found â†’ print "NO" and continue.

5ï¸âƒ£ Otherwise:

Print "YES"

For each i from 2 to n:

If a[i] â‰  a[1] â†’ print 1 i

Else â†’ print diffIndex i

ğŸ§© Example Walkthrough
Example 1:
n = 5
a = [1, 2, 2, 1, 3]


a[1] = 1

diffIndex = 2 (gang 2)

Now build:

i	a[i]	Action	Road
2	2	a[2] â‰  a[1]	(1, 2)
3	2	a[3] â‰  a[1]	(1, 3)
4	1	a[4] = a[1]	(2, 4)
5	3	a[5] â‰  a[1]	(1, 5)

âœ… All connected
âœ… Different gangs connected only
âœ… 4 roads (nâˆ’1 = 4)

Output:

YES
1 2
1 3
2 4
1 5

Example 2:
n = 3
a = [1, 1, 1]


â†’ all same gangs â†’ impossible

Output:

NO

ğŸ’» Final Code
#include <bits/stdc++.h>
using namespace std;

int main() {
    ios::sync_with_stdio(false);
    cin.tie(0);

    int t;
    cin >> t;
    while (t--) {
        int n;
        cin >> n;
        vector<int> a(n + 1);
        for (int i = 1; i <= n; i++) cin >> a[i];

        int diffIndex = -1;
        for (int i = 2; i <= n; i++) {
            if (a[i] != a[1]) {
                diffIndex = i;
                break;
            }
        }

        if (diffIndex == -1) {
            cout << "NO\n";
            continue;
        }

        cout << "YES\n";
        for (int i = 2; i <= n; i++) {
            if (a[i] != a[1])
                cout << 1 << " " << i << "\n";
            else
                cout << diffIndex << " " << i << "\n";
        }
    }
    return 0;
}

â±ï¸ Complexity Analysis
Type	Complexity
Time	O(n) per test case
Space	O(n)
Sum of n over test cases â‰¤ 5000 â†’ very efficient âœ…	
ğŸ§  Conceptual Summary
Concept	Explanation
Graph Type	Tree (nâˆ’1 edges)
Condition	Adjacent nodes must have different gang IDs
Trick	Use 2 gang types as connectors
Impossible Case	All gangs are same
Construction	1 connects to all different, diffIndex connects to same
ğŸ§© Pattern Recognition (for Future Problems)

This is a "connect with constraints" pattern problem.
When you see:

"Connect all nodes"

"No same values adjacent"
â†’ Think of finding two different elements and using them to form a spanning tree.

âœ… Key Takeaways

If all gangs are same â†’ âŒ NO

Else â†’ always possible â†’ âœ… YES

Use district 1 and first different as hubs.

Each node connects to one of these depending on gang.
